<Window x:Class="NetworkService.Views.TerminalWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="NetworkService Terminal" Width="780" Height="460"
        WindowStartupLocation="CenterOwner" ResizeMode="CanResizeWithGrip"
        FontFamily="Consolas" Background="{StaticResource Clr.Bg}"
        xmlns:helpers="clr-namespace:NetworkService.Helpers">

   
    <Window.InputBindings>
        
        <KeyBinding Key="Enter"
                    Command="{Binding SubmitCommand}"/>
        
        <KeyBinding Modifiers="Control" Key="W"
                    Command="{Binding CloseCommand}"/>
    </Window.InputBindings>

    <Grid Margin="12" Background="{StaticResource Clr.Surface}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="6"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        
        <DockPanel Grid.Row="0" LastChildFill="False" Margin="10,10,10,0">
            <TextBlock Text="Terminal" FontSize="18" FontWeight="SemiBold"
                       Foreground="{StaticResource Clr.Text}" />
            <TextBlock Text="  – type 'help' for commands"
                       Foreground="{StaticResource Clr.SubText}" Margin="8,3,0,0"/>
            <Button Content="Close" Margin="10,0,0,0" MinWidth="80"
                    Command="{Binding CloseCommand}" DockPanel.Dock="Right"/>
        </DockPanel>

       
        <Border Grid.Row="1"/>

        
        <Border Grid.Row="2" Margin="10" Padding="8"
                BorderBrush="{StaticResource Clr.Border}" BorderThickness="1"
                CornerRadius="8" Background="White">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding Output}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" FontSize="13"
                                       Foreground="{StaticResource Clr.Text}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        
        <DockPanel Grid.Row="4" Margin="10,0,10,10" LastChildFill="True">
            <TextBlock Text="$" VerticalAlignment="Center" Margin="0,0,8,0"
                       Foreground="{StaticResource Clr.SubText}" />
            <TextBox Text="{Binding Input, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     BorderBrush="{StaticResource Clr.Border}" BorderThickness="1"
                     Padding="6" Background="White" FontSize="13"
                     helpers:ClickBehavior.ClickCommand="{Binding SubmitCommand}">
                <TextBox.InputBindings>
                    
                    <KeyBinding Modifiers="Shift" Key="Enter" Command="{x:Static ApplicationCommands.NotACommand}"/>
                    
                    <KeyBinding Key="Enter" Command="{Binding SubmitCommand}"/>
                </TextBox.InputBindings>
            </TextBox>
            <Button Content="Run" Margin="8,0,0,0" MinWidth="80"
                    Command="{Binding SubmitCommand}"/>
        </DockPanel>
    </Grid>
</Window>
